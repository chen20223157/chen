<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æµ‹è¯•å¼€å‘æŠ€æœ¯åšå®¢ - éŸ³è§†é¢‘æµ‹è¯•ä¸å¼€å‘å®è·µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#2563eb',
              secondary: '#7c3aed', 
              accent: '#10b981',
              dark: '#1e293b',
            }
          }
        }
      }
    </script>
    <style>
      .gradient-bg {
        background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      }
      .tag-hover {
        transition: all 0.2s ease;
      }
      .tag-hover:hover {
        transform: scale(1.05);
      }
      .page {
        display: none;
      }
      .page.active {
        display: block;
      }
    </style>
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200">
    <div id="app">
      <!-- å¯¼èˆªæ  -->
        <nav id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent">
          <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">
              <a href="#/" class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                  <span class="text-white font-bold">ğŸ§ª</span>
                </div>
                <span class="text-2xl font-bold text-primary">æµ‹è¯•å¼€å‘æŠ€æœ¯åšå®¢</span>
              </a>
              <div class="hidden md:flex items-center space-x-8">
                <a href="#/" class="nav-link text-gray-700 dark:text-gray-300 hover:text-primary transition-colors">é¦–é¡µ</a>
                <a href="#/posts" class="nav-link text-gray-700 dark:text-gray-300 hover:text-primary transition-colors">æ–‡ç« </a>
                <a href="#/tags" class="nav-link text-gray-700 dark:text-gray-300 hover:text-primary transition-colors">æ ‡ç­¾</a>
                <a href="#/about" class="nav-link text-gray-700 dark:text-gray-300 hover:text-primary transition-colors">å…³äºæˆ‘</a>
                <button id="darkModeToggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                  <span class="dark:hidden">ğŸŒ™</span>
                  <span class="hidden dark:inline">â˜€ï¸</span>
                </button>
              </div>
            </div>
          </div>
        </nav>

      <!-- é¦–é¡µ -->
      <div id="home-page" class="page active">
        <div class="gradient-bg text-white py-20 md:py-32">
          <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">
              ä¸“æ³¨éŸ³è§†é¢‘æµ‹è¯•ä¸å¼€å‘
            </h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90">
              æ·±åº¦è§£æéŸ³è§†é¢‘æŠ€æœ¯ï¼Œåˆ†äº«æµ‹è¯•å¼€å‘å®æˆ˜ç»éªŒ
            </p>
            <div class="flex flex-wrap justify-center gap-4">
              <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full text-sm">ğŸµ éŸ³é¢‘å¤„ç†</span>
              <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full text-sm">ğŸ¬ è§†é¢‘è§£ç </span>
              <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full text-sm">ğŸ§ª æµ‹è¯•æŠ€æœ¯</span>
              <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full text-sm">âš¡ æ€§èƒ½ä¼˜åŒ–</span>
            </div>
          </div>
        </div>
        <div class="container mx-auto px-4 py-16">
          <h2 class="text-3xl font-bold text-center mb-12">æœ€æ–°æ–‡ç« </h2>
          <div id="home-posts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- æ–‡ç« å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>

      <!-- å…¨éƒ¨æ–‡ç« é¡µ -->
      <div id="posts-page" class="page">
        <div class="container mx-auto px-4 py-20">
          <h1 class="text-4xl font-bold text-center mb-12">å…¨éƒ¨æ–‡ç« </h1>
          <div id="all-posts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- æ–‡ç« å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>

      <!-- æ–‡ç« è¯¦æƒ…é¡µ -->
      <div id="post-detail-page" class="page">
        <div class="container mx-auto px-4 py-20">
          <article id="post-content" class="max-w-4xl mx-auto">
            <!-- æ–‡ç« å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </article>
        </div>
      </div>

      <!-- æ ‡ç­¾é¡µ -->
      <div id="tags-page" class="page">
        <div class="container mx-auto px-4 py-20">
          <h1 class="text-4xl font-bold text-center mb-12">æ ‡ç­¾äº‘</h1>
          <div id="tags-cloud" class="flex flex-wrap justify-center gap-4">
            <!-- æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>

      <!-- å…³äºé¡µé¢ -->
      <div id="about-page" class="page">
        <div class="min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800">
          <div class="container mx-auto px-4 py-16">
            <div class="max-w-4xl mx-auto">
              <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden">
                <div class="gradient-bg p-8 text-white">
                  <h1 class="text-3xl md:text-4xl font-bold mb-4">å…³äºæµ‹è¯•å¼€å‘æŠ€æœ¯åšå®¢</h1>
                  <p class="text-xl opacity-90">ä¸“æ³¨éŸ³è§†é¢‘æµ‹è¯•ä¸å¼€å‘å®è·µ</p>
                </div>
                
                <div class="p-8">
                  <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div>
                      <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200">ğŸ¯ åšå®¢å®šä½</h2>
                      <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                        æœ¬åšå®¢ä¸“æ³¨äºéŸ³è§†é¢‘é¢†åŸŸçš„æµ‹è¯•å¼€å‘æŠ€æœ¯ï¼Œæ¶µç›–éŸ³é¢‘å¤„ç†ã€è§†é¢‘è§£ç ã€æ€§èƒ½ä¼˜åŒ–ã€æµ‹è¯•éªŒè¯ç­‰æ ¸å¿ƒæŠ€æœ¯æ ˆã€‚
                        é€šè¿‡æ·±å…¥çš„æŠ€æœ¯è§£æå’Œå®æˆ˜ç»éªŒåˆ†äº«ï¼Œå¸®åŠ©æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆæå‡æŠ€æœ¯èƒ½åŠ›å’Œè§£å†³å®é™…é—®é¢˜ã€‚
                      </p>
                    </div>
                    
                    <div>
                      <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200">ğŸ§ª æŠ€æœ¯æ ˆ</h2>
                      <div class="grid grid-cols-2 gap-2">
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">éŸ³é¢‘å¤„ç†</span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">è§†é¢‘è§£ç </span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">æ€§èƒ½æµ‹è¯•</span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">è‡ªåŠ¨åŒ–æµ‹è¯•</span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">Windows API</span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">Androidå¼€å‘</span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">ç¡¬ä»¶åŠ é€Ÿ</span>
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">FFmpeg</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="border-t border-gray-200 dark:border-gray-700 pt-8">
                    <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200">ï¿½ æ ¸å¿ƒå†…å®¹æ¨¡å—</h2>
                    <div class="grid md:grid-cols-3 gap-6">
                      <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-xl">
                        <h3 class="font-bold text-lg mb-3 text-primary">ğŸµ éŸ³é¢‘æŠ€æœ¯</h3>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                          <li>â€¢ WindowséŸ³é¢‘APIå¯¹æ¯”</li>
                          <li>â€¢ AndroidéŸ³é¢‘é‡‡é›†æ–¹æ¡ˆ</li>
                          <li>â€¢ å·¦å³å£°é“æµ‹è¯•æŠ€æœ¯</li>
                          <li>â€¢ éŸ³é¢‘å»¶è¿Ÿä¼˜åŒ–</li>
                        </ul>
                      </div>
                      
                      <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-xl">
                        <h3 class="font-bold text-lg mb-3 text-primary">ğŸ¬ è§†é¢‘æŠ€æœ¯</h3>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                          <li>â€¢ ç¡¬è§£vsè½¯è§£æŠ€æœ¯</li>
                          <li>â€¢ NVIDIAæ˜¾å¡ä¼˜åŒ–</li>
                          <li>â€¢ EVRæ¸²æŸ“æ¨¡å¼</li>
                          <li>â€¢ 4K/8Kè§†é¢‘å¤„ç†</li>
                        </ul>
                      </div>
                      
                      <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-xl">
                        <h3 class="font-bold text-lg mb-3 text-primary">ğŸ§ª æµ‹è¯•æŠ€æœ¯</h3>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                          <li>â€¢ æ€§èƒ½åŸºå‡†æµ‹è¯•</li>
                          <li>â€¢ è‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ¡ˆ</li>
                          <li>â€¢ å…¼å®¹æ€§éªŒè¯</li>
                          <li>â€¢ ç¼“å­˜ç­–ç•¥æµ‹è¯•</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  
                  <div class="border-t border-gray-200 dark:border-gray-700 pt-8 mt-8">
                    <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200">ğŸ“§ è”ç³»æ–¹å¼</h2>
                    <div class="flex flex-wrap gap-4">
                      <a href="#" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-primary/90 transition-colors">
                        GitHub
                      </a>
                      <a href="#" class="bg-secondary text-white px-6 py-2 rounded-full hover:bg-secondary/90 transition-colors">
                        æŠ€æœ¯äº¤æµç¾¤
                      </a>
                      <a href="#" class="bg-accent text-white px-6 py-2 rounded-full hover:bg-accent/90 transition-colors">
                        é‚®ç®±è”ç³»
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- é¡µè„š -->
      <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <h3 class="text-xl font-bold mb-4">æŠ€æœ¯åšå®¢</h3>
              <p class="text-gray-400">
                åˆ†äº«å‰ç«¯å¼€å‘ç»éªŒï¼Œè®°å½•æŠ€æœ¯æˆé•¿ä¹‹è·¯
              </p>
            </div>
            <div>
              <h4 class="text-lg font-semibold mb-4">å¿«é€Ÿé“¾æ¥</h4>
              <ul class="space-y-2">
                <li><a href="#/" class="text-gray-400 hover:text-white transition-colors">é¦–é¡µ</a></li>
                <li><a href="#/posts" class="text-gray-400 hover:text-white transition-colors">æ–‡ç« </a></li>
                <li><a href="#/tags" class="text-gray-400 hover:text-white transition-colors">æ ‡ç­¾</a></li>
                <li><a href="#/about" class="text-gray-400 hover:text-white transition-colors">å…³äºæˆ‘</a></li>
              </ul>
            </div>
            <div>
              <h4 class="text-lg font-semibold mb-4">è”ç³»æ–¹å¼</h4>
              <div class="flex space-x-4">
                <a href="#" class="text-gray-400 hover:text-white transition-colors">GitHub</a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">Twitter</a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">Email</a>
              </div>
            </div>
          </div>
          <div class="border-t border-gray-700 mt-8 pt-8 text-center">
            <p class="text-gray-400">
              Â© 2024 æŠ€æœ¯åšå®¢. ä¿ç•™æ‰€æœ‰æƒåˆ©.
            </p>
          </div>
        </div>
      </footer>
    </div>

    <script>
      // æ¨¡æ‹Ÿæ•°æ® - æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆä¸»é¢˜æ–‡ç« 
      const posts = [
        {
          id: 1,
          title: "WindowséŸ³è§†é¢‘é‡‡é›†æŠ€æœ¯è¯¦è§£ï¼šDirectSound vs WaveOut vs WASAPI",
          excerpt: "æ·±åº¦è§£æWindowså¹³å°ä¸‰å¤§éŸ³é¢‘APIçš„æŠ€æœ¯å·®å¼‚ã€é€‚ç”¨åœºæ™¯åŠæµ‹è¯•è¦ç‚¹ï¼Œæ¶µç›–DirectSoundç¡¬ä»¶åŠ é€Ÿã€WaveOutå…¼å®¹æ€§ã€WASAPIä½å»¶è¿Ÿç­‰æ ¸å¿ƒç‰¹æ€§ã€‚",
          content: `# WindowséŸ³è§†é¢‘é‡‡é›†æŠ€æœ¯è¯¦è§£

## æ ¸å¿ƒAPIå¯¹æ¯”

### 1. WaveOut API
- **ç‰¹ç‚¹**ï¼šæœ€æ—©çš„éŸ³é¢‘æ’­æ”¾APIï¼Œå±äºWin32 APIçš„ä¸€éƒ¨åˆ†
- **ä¼˜åŠ¿**ï¼šæ¥å£ç®€å•ï¼Œå…¼å®¹æ€§é«˜ï¼Œèµ„æºå ç”¨ç‡ä½
- **åŠ£åŠ¿**ï¼šæ— ç¼“å†²å’ŒåŒæ­¥æœºåˆ¶ï¼Œå®æ—¶æ’­æ”¾èƒ½åŠ›è¾ƒå¼±
- **é€‚ç”¨åœºæ™¯**ï¼šåŸºæœ¬éŸ³é¢‘æ’­æ”¾ï¼Œå¯¹éŸ³é¢‘è´¨é‡è¦æ±‚ä¸é«˜çš„åº”ç”¨

### 2. DirectSound
- **ç‰¹ç‚¹**ï¼šDirectXç»„ä»¶ï¼Œä¸“ä¸ºé«˜è´¨é‡éŸ³é¢‘å¤„ç†è®¾è®¡
- **ä¼˜åŠ¿**ï¼šæ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œå¤šå£°é“è¾“å‡ºï¼Œçµæ´»çš„ç¼“å†²åŒºç®¡ç†
- **åŠ£åŠ¿**ï¼šç›¸å¯¹å¤æ‚ï¼Œéœ€è¦DirectXè¿è¡Œæ—¶
- **é€‚ç”¨åœºæ™¯**ï¼šæ¸¸æˆå’Œå¤šåª’ä½“åº”ç”¨ï¼Œå¤æ‚éŸ³é¢‘æ··åˆæ§åˆ¶

### 3. WASAPI
- **ç‰¹ç‚¹**ï¼šWindows Vista+çš„æ–°éŸ³é¢‘APIï¼Œä¸“ä¸ºä½å»¶è¿Ÿè®¾è®¡
- **ä¼˜åŠ¿**ï¼šç›´æ¥è®¿é—®éŸ³é¢‘è®¾å¤‡ï¼Œæ”¯æŒå…±äº«å’Œç‹¬å æ¨¡å¼
- **åŠ£åŠ¿**ï¼šä»…æ”¯æŒè¾ƒæ–°Windowsç‰ˆæœ¬
- **é€‚ç”¨åœºæ™¯**ï¼šä¸“ä¸šéŸ³é¢‘åº”ç”¨ï¼Œå®æ—¶éŸ³é¢‘å¤„ç†

## æµ‹è¯•éªŒè¯è¦ç‚¹

1. **å»¶è¿Ÿæµ‹è¯•**ï¼šæµ‹é‡å„APIçš„éŸ³é¢‘å»¶è¿Ÿï¼ŒWASAPIåº”æ˜¾è‘—ä½äºå…¶ä»–API
2. **å…¼å®¹æ€§æµ‹è¯•**ï¼šéªŒè¯ä¸åŒWindowsç‰ˆæœ¬çš„APIå¯ç”¨æ€§
3. **æ€§èƒ½æµ‹è¯•**ï¼šç›‘æ§CPUå ç”¨ç‡å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ
4. **éŸ³è´¨æµ‹è¯•**ï¼šè¯„ä¼°éŸ³é¢‘è¾“å‡ºçš„ä¿çœŸåº¦å’Œå¤±çœŸæƒ…å†µ

## å®é™…åº”ç”¨å»ºè®®

- **ä¼˜å…ˆé€‰æ‹©WASAPI**ï¼šå¯¹äºéœ€è¦ä½å»¶è¿Ÿçš„ç°ä»£åº”ç”¨
- **DirectSoundä½œä¸ºå¤‡é€‰**ï¼šå½“éœ€è¦ç¡¬ä»¶åŠ é€Ÿæˆ–å…¼å®¹æ—§ç³»ç»Ÿæ—¶
- **WaveOutç”¨äºç®€å•åœºæ™¯**ï¼šåŸºæœ¬æ’­æ”¾åŠŸèƒ½ï¼Œå¿«é€Ÿå®ç°

## ä»£ç ç¤ºä¾‹

### WASAPIéŸ³é¢‘åˆå§‹åŒ–
\`\`\`cpp
#include <audioclient.h>
#include <mmdeviceapi.h>

// åˆå§‹åŒ–WASAPI
IMMDeviceEnumerator *pEnumerator = NULL;
IMMDevice *pDevice = NULL;
IAudioClient *pAudioClient = NULL;

CoInitialize(NULL);
CoCreateInstance(
    __uuidof(MMDeviceEnumerator), NULL, 
    CLSCTX_ALL, __uuidof(IMMDeviceEnumerator),
    (void**)&pEnumerator
);
\`\`\`

### æ€§èƒ½æµ‹è¯•ä»£ç 
\`\`\`cpp
// æµ‹é‡éŸ³é¢‘å»¶è¿Ÿ
LARGE_INTEGER start, end, freq;
QueryPerformanceFrequency(&freq);
QueryPerformanceCounter(&start);

// æ’­æ”¾éŸ³é¢‘
PlayAudioBuffer();

QueryPerformanceCounter(&end);
double latency = (double)(end.QuadPart - start.QuadPart) / freq.QuadPart * 1000;
\`\`\``,
          date: "2025-12-22",
          tags: ["éŸ³é¢‘å¤„ç†", "Windows", "API", "æµ‹è¯•æŠ€æœ¯"],
          author: "æŠ€æœ¯åšä¸»",
          readTime: "8åˆ†é’Ÿ"
        },
          {
            id: 2,
            title: "AndroidéŸ³é¢‘é‡‡é›†ï¼šOpenSLES vs AudioRecordæ·±åº¦å¯¹æ¯”åˆ†æ",
            excerpt: "å…¨é¢å¯¹æ¯”Androidå¹³å°ä¸¤å¤§éŸ³é¢‘é‡‡é›†æ–¹æ¡ˆï¼Œä»æ€§èƒ½ã€å…¼å®¹æ€§ã€å¼€å‘å¤æ‚åº¦ç­‰ç»´åº¦åˆ†æOpenSLESå’ŒAudioRecordçš„ä¼˜åŠ£ï¼ŒåŠ©ä½ é€‰æ‹©åˆé€‚çš„éŸ³é¢‘é‡‡é›†æ–¹æ¡ˆã€‚",
            content: `# AndroidéŸ³é¢‘é‡‡é›†æŠ€æœ¯å¯¹æ¯”

## OpenSLESè¯¦è§£

### æ ¸å¿ƒç‰¹æ€§
- **è·¨å¹³å°æ€§**ï¼šæ”¯æŒAndroidã€iOSç­‰å¤šä¸ªå¹³å°
- **ä½å»¶è¿Ÿ**ï¼šç»•è¿‡Javaå±‚ï¼Œç›´æ¥å¤„ç†PCMæ•°æ®
- **C/C++å®ç°**ï¼šé€šè¿‡NDKæä¾›ï¼Œé€‚åˆæ€§èƒ½æ•æ„Ÿåœºæ™¯
- **ä¸“ä¸šéŸ³é¢‘åŠŸèƒ½**ï¼šæ”¯æŒæ’­æ”¾ã€å½•åˆ¶ã€éŸ³æ•ˆå¤„ç†

### å¼€å‘è¦ç‚¹
\`\`\`cpp
// OpenSLESå¼•æ“åˆ›å»º
SLresult result = slCreateEngine(&engineObject, 0, NULL, 0, NULL, NULL);
result = (*engineObject)->Realize(engineObject, SL_BOOLEAN_FALSE);
result = (*engineObject)->GetInterface(engineObject, SL_IID_ENGINE, &engine);

// åˆ›å»ºéŸ³é¢‘å½•åˆ¶å™¨
SLDataLocator_IODevice loc_dev = {SL_DATALOCATOR_IODEVICE, SL_IODEVICE_AUDIOINPUT, SL_DEFAULTDEVICEID_AUDIOINPUT, NULL};
SLDataSource audioSrc = {&loc_dev, NULL};

SLDataLocator_AndroidSimpleBufferQueue loc_bq = {SL_DATALOCATOR_ANDROIDSIMPLEBUFFERQUEUE, 2};
SLDataFormat_PCM format_pcm = {
    SL_DATAFORMAT_PCM, 1, SL_SAMPLINGRATE_44_1,
    SL_PCMSAMPLEFORMAT_FIXED_16, SL_PCMSAMPLEFORMAT_FIXED_16,
    SL_SPEAKER_FRONT_CENTER, SL_BYTEORDER_LITTLEENDIAN
};
SLDataSink audioSnk = {&loc_bq, &format_pcm};
\`\`\`

### é€‚ç”¨åœºæ™¯
- æ¸¸æˆéŸ³é¢‘å¼•æ“
- éŸ³ä¹åˆ¶ä½œåº”ç”¨
- å®æ—¶éŸ³é¢‘å¤„ç†
- ä½å»¶è¿Ÿé€šä¿¡åº”ç”¨

## AudioRecordè¯¦è§£

### æ ¸å¿ƒç‰¹æ€§
- **Javaå±‚API**ï¼šä½¿ç”¨ç®€å•ï¼Œé›†æˆæ–¹ä¾¿
- **è‡ªåŠ¨æƒé™ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†å½•éŸ³æƒé™
- **ç”Ÿå‘½å‘¨æœŸç»‘å®š**ï¼šä¸Activity/Fragmentç”Ÿå‘½å‘¨æœŸåŒæ­¥
- **æ ¼å¼æ”¯æŒä¸°å¯Œ**ï¼šæ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼å’Œé‡‡æ ·ç‡

### å¼€å‘è¦ç‚¹
\`\`\`java
// AudioRecordåˆå§‹åŒ–
int sampleRate = 44100;
int channelConfig = AudioFormat.CHANNEL_IN_MONO;
int audioFormat = AudioFormat.ENCODING_PCM_16BIT;
int bufferSize = AudioRecord.getMinBufferSize(sampleRate, channelConfig, audioFormat);

AudioRecord audioRecord = new AudioRecord(
    MediaRecorder.AudioSource.MIC,
    sampleRate,
    channelConfig,
    audioFormat,
    bufferSize
);

// å¼€å§‹å½•éŸ³
audioRecord.startRecording();
byte[] buffer = new byte[bufferSize];
audioRecord.read(buffer, 0, bufferSize);
\`\`\`

### é€‚ç”¨åœºæ™¯
- æ™®é€šå½•éŸ³åº”ç”¨
- è¯­éŸ³è¯†åˆ«
- å¤§éƒ¨åˆ†Androidåº”ç”¨å¼€å‘

## æ€§èƒ½å¯¹æ¯”

| ç»´åº¦ | OpenSLES | AudioRecord |
|------|----------|-------------|
| å»¶è¿Ÿ | æä½ï¼ˆ<10msï¼‰ | ä¸­ç­‰ï¼ˆ20-50msï¼‰ |
| CPUå ç”¨ | ä½ | ä¸­ç­‰ |
| å¼€å‘å¤æ‚åº¦ | é«˜ | ä½ |
| å…¼å®¹æ€§ | å¥½ | æå¥½ |
| åŠŸèƒ½çµæ´»æ€§ | é«˜ | ä¸­ç­‰ |

## é€‰æ‹©å»ºè®®

1. **é€‰æ‹©OpenSLESçš„åœºæ™¯**ï¼š
   - éœ€è¦æä½å»¶è¿Ÿçš„å®æ—¶éŸ³é¢‘å¤„ç†
   - æ¸¸æˆéŸ³é¢‘å¼•æ“
   - è·¨å¹³å°éŸ³é¢‘åº”ç”¨

2. **é€‰æ‹©AudioRecordçš„åœºæ™¯**ï¼š
   - æ™®é€šå½•éŸ³åŠŸèƒ½
   - å¿«é€Ÿå¼€å‘éœ€æ±‚
   - å¯¹å»¶è¿Ÿè¦æ±‚ä¸é«˜çš„åº”ç”¨

## æµ‹è¯•éªŒè¯æ–¹æ¡ˆ

### å»¶è¿Ÿæµ‹è¯•
\`\`\`java
// æµ‹é‡éŸ³é¢‘å»¶è¿Ÿ
long startTime = System.nanoTime();
// éŸ³é¢‘å¤„ç†æµç¨‹
processAudio();
long endTime = System.nanoTime();
double latencyMs = (endTime - startTime) / 1_000_000.0;
\`\`\`

### æ€§èƒ½ç›‘æ§
\`\`\`bash
# ç›‘æ§CPUä½¿ç”¨ç‡
adb shell top -p [pid]

# ç›‘æ§å†…å­˜å ç”¨
adb shell dumpsys meminfo [package_name]
\`\`\``,
            date: "2025-12-21",
            tags: ["Android", "éŸ³é¢‘é‡‡é›†", "OpenSLES", "AudioRecord", "æ€§èƒ½å¯¹æ¯”"],
            author: "æŠ€æœ¯åšä¸»",
            readTime: "10åˆ†é’Ÿ"
          },
          {
            id: 3,
            title: "éŸ³è§†é¢‘ç¡¬è§£vsè½¯è§£ï¼šæŠ€æœ¯åŸç†ã€æ€§èƒ½å·®å¼‚ä¸æµ‹è¯•éªŒè¯",
            excerpt: "æ·±å…¥è§£æéŸ³è§†é¢‘è§£ç çš„ä¸¤ç§æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆï¼Œä»ç¡¬ä»¶æ¶æ„ã€æ€§èƒ½è¡¨ç°ã€å…¼å®¹æ€§ç­‰è§’åº¦å…¨é¢å¯¹æ¯”ç¡¬è§£å’Œè½¯è§£ï¼Œæä¾›å®Œæ•´çš„æµ‹è¯•éªŒè¯æ–¹æ¡ˆã€‚",
            content: `# éŸ³è§†é¢‘ç¡¬è§£vsè½¯è§£æŠ€æœ¯å…¨è§£æ

## æ ¸å¿ƒå®šä¹‰

### ç¡¬è§£ï¼ˆç¡¬ä»¶è§£ç ï¼‰
- **æ‰§è¡Œä¸»ä½“**ï¼šä¸“ç”¨ç¡¬ä»¶è§£ç æ¨¡å—ï¼ˆGPU/è§£ç èŠ¯ç‰‡ï¼‰
- **å·¥ä½œåŸç†**ï¼šåˆ©ç”¨ç¡¬ä»¶å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œä¸“ä¸ºè§£ç ä¼˜åŒ–è®¾è®¡
- **å…¸å‹æ¥å£**ï¼šAndroid MediaCodecã€iOS VideoToolboxã€PCç«¯æ˜¾å¡API

### è½¯è§£ï¼ˆè½¯ä»¶è§£ç ï¼‰
- **æ‰§è¡Œä¸»ä½“**ï¼šCPUé€šè¿‡è½¯ä»¶ç®—æ³•å®Œæˆè§£ç 
- **å·¥ä½œåŸç†**ï¼šçº¯è½¯ä»¶å®ç°ï¼Œä¾èµ–CPUè®¡ç®—èƒ½åŠ›
- **å…¸å‹å·¥å…·**ï¼šFFmpeg libavcodecã€OpenH264

## æ€§èƒ½å¯¹æ¯”åˆ†æ

| å¯¹æ¯”ç»´åº¦ | ç¡¬è§£ | è½¯è§£ |
|----------|------|------|
| CPUå ç”¨ | æä½ï¼ˆâ‰¤10%ï¼‰ | é«˜ï¼ˆ4Kå¯è¾¾60%+ï¼‰ |
| åŠŸè€—è¡¨ç° | ä½ | é«˜ |
| è§£ç æ€§èƒ½ | å¼ºï¼ˆæ”¯æŒ8K 60fpsï¼‰ | å—CPUæ€§èƒ½é™åˆ¶ |
| æ ¼å¼å…¼å®¹æ€§ | ä¾èµ–ç¡¬ä»¶æ”¯æŒ | å¼ºï¼ˆè½¯ä»¶åº“å¿«é€Ÿæ”¯æŒï¼‰ |
| å»¶è¿Ÿè¡¨ç° | ä½ï¼ˆâ‰¤50msï¼‰ | é«˜ï¼ˆâ‰¥100msï¼‰ |

## æµ‹è¯•éªŒè¯æ–¹æ¡ˆ

### 1. æ€§èƒ½æµ‹è¯•
\`\`\`bash
# ç›‘æ§CPUä½¿ç”¨ç‡
top -p [player_pid]

# ç›‘æ§å†…å­˜å ç”¨
cat /proc/[pid]/status

# æµ‹é‡è§£ç å»¶è¿Ÿ
ffprobe -show_frames -select_streams v:0 input.mp4
\`\`\`

### 2. å…¼å®¹æ€§æµ‹è¯•
- æµ‹è¯•ä¸åŒç¼–ç æ ¼å¼ï¼šH.264ã€H.265ã€AV1ã€VP9
- æµ‹è¯•ä¸åŒåˆ†è¾¨ç‡ï¼š720Pã€1080Pã€4Kã€8K
- æµ‹è¯•ä¸åŒç ç‡ï¼š1Mbps-50Mbps

### 3. ç”»è´¨è¯„ä¼°
- å®¢è§‚æŒ‡æ ‡ï¼šPSNRã€SSIMã€VMAF
- ä¸»è§‚è¯„ä¼°ï¼šMOSè¯„åˆ†
- ç‰¹æ®Šåœºæ™¯ï¼šè¿åŠ¨ç”»é¢ã€æš—éƒ¨ç»†èŠ‚ã€è‰²å½©è¿˜åŸ

## å®é™…åº”ç”¨å»ºè®®

### ä¼˜å…ˆé€‰æ‹©ç¡¬è§£çš„åœºæ™¯
1. **é«˜ç ç‡é«˜æ¸…è§†é¢‘**ï¼š4K/8Kè§†é¢‘æ’­æ”¾
2. **ç§»åŠ¨ç«¯è®¾å¤‡**ï¼šç”µæ± ç»­èˆªè€ƒè™‘
3. **å®æ—¶æ€§è¦æ±‚é«˜**ï¼šç›´æ’­ã€è§†é¢‘é€šè¯
4. **å¤šä»»åŠ¡å¹¶è¡Œ**ï¼šåŒæ—¶è¿è¡Œå¤šä¸ªåº”ç”¨

### ä¼˜å…ˆé€‰æ‹©è½¯è§£çš„åœºæ™¯
1. **æ ¼å¼å…¼å®¹æ€§è¦æ±‚é«˜**ï¼šå°ä¼—æ ¼å¼ã€æ–°å…´ç¼–ç 
2. **åå¤„ç†éœ€æ±‚å¤æ‚**ï¼šè§†é¢‘å‰ªè¾‘ã€æ»¤é•œå¤„ç†
3. **è·¨å¹³å°ä¸€è‡´æ€§**ï¼šå¤šå¹³å°ç»Ÿä¸€ä½“éªŒ
4. **è€æ—§è®¾å¤‡**ï¼šæ— ç¡¬ä»¶è§£ç æ”¯æŒ

## æ··åˆè§£ç ç­–ç•¥

ç°ä»£æ’­æ”¾å™¨é€šå¸¸é‡‡ç”¨"ç¡¬è§£ä¼˜å…ˆï¼Œè½¯è§£å…œåº•"ç­–ç•¥ï¼š

1. **æ£€æµ‹ç¡¬ä»¶æ”¯æŒ**ï¼šæŸ¥è¯¢è®¾å¤‡è§£ç èƒ½åŠ›
2. **å°è¯•ç¡¬è§£**ï¼šä¼˜å…ˆä½¿ç”¨ç¡¬ä»¶è§£ç 
3. **é™çº§å¤„ç†**ï¼šç¡¬è§£å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢è½¯è§£
4. **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®æ’­æ”¾çŠ¶æ€åŠ¨æ€é€‰æ‹©è§£ç æ–¹å¼

## ä»£ç å®ç°ç¤ºä¾‹

### ç¡¬è§£åˆå§‹åŒ–ï¼ˆAndroidï¼‰
\`\`\`java
// åˆ›å»ºMediaCodecç¡¬è§£å™¨
MediaCodec codec = MediaCodec.createDecoderByType(MediaFormat.MIMETYPE_VIDEO_AVC);
MediaFormat format = MediaFormat.createVideoFormat(MediaFormat.MIMETYPE_VIDEO_AVC, width, height);
format.setInteger(MediaFormat.KEY_BIT_RATE, bitRate);
format.setInteger(MediaFormat.KEY_FRAME_RATE, frameRate);
codec.configure(format, surface, null, 0);
codec.start();
\`\`\`

### è½¯è§£åˆå§‹åŒ–ï¼ˆFFmpegï¼‰
\`\`\`c
// FFmpegè½¯è§£å™¨åˆå§‹åŒ–
AVCodec *codec = avcodec_find_decoder(AV_CODEC_ID_H264);
AVCodecContext *codec_ctx = avcodec_alloc_context3(codec);
avcodec_open2(codec_ctx, codec, NULL);

// è§£ç å¾ªç¯
while (av_read_frame(format_ctx, &packet) >= 0) {
    int ret = avcodec_send_packet(codec_ctx, &packet);
    if (ret < 0) break;
    
    while (ret >= 0) {
        ret = avcodec_receive_frame(codec_ctx, frame);
        if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF) break;
    }
}
\`\`\`

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç¡¬è§£ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨Surfaceç›´æ¥æ¸²æŸ“
   - å¯ç”¨ç¡¬ä»¶ç¼“å†²åŒºå¤ç”¨
   - åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°

2. **è½¯è§£ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨å¤šçº¿ç¨‹è§£ç 
   - å¯ç”¨SIMDæŒ‡ä»¤é›†ä¼˜åŒ–
   - ä¼˜åŒ–å†…å­˜æ‹·è´æ“ä½œ

3. **é€šç”¨ä¼˜åŒ–**ï¼š
   - å®ç°æ™ºèƒ½é™çº§æœºåˆ¶
   - æ·»åŠ æ€§èƒ½ç›‘æ§åé¦ˆ
   - æ ¹æ®è®¾å¤‡èƒ½åŠ›åŠ¨æ€è°ƒæ•´`,
            date: "2025-12-20",
            tags: ["éŸ³è§†é¢‘è§£ç ", "ç¡¬è§£", "è½¯è§£", "æ€§èƒ½æµ‹è¯•", "å…¼å®¹æ€§"],
            author: "æŠ€æœ¯åšä¸»",
            readTime: "12åˆ†é’Ÿ"
          },
          {
            id: 4,
            title: "Android AudioTrack JNIæŠ€æœ¯è¯¦è§£ï¼šJavaä¸Nativeçš„æ¡¥æ¢",
            excerpt: "æ·±å…¥è§£æAndroid AudioTrackçš„JNIå®ç°æœºåˆ¶ï¼Œä»Javaå±‚APIè°ƒç”¨åˆ°åº•å±‚C++å®ç°çš„å®Œæ•´æ•°æ®æµï¼ŒæŒæ¡éŸ³é¢‘æ’­æ”¾çš„æ ¸å¿ƒæŠ€æœ¯åŸç†ã€‚",
            content: `# Android AudioTrack JNIæŠ€æœ¯è¯¦è§£

## JNIæ¡¥æ¢ä½œç”¨

JNIï¼ˆJava Native Interfaceï¼‰æ˜¯Javaä¸C/C++ä¹‹é—´çš„æ¡¥æ¢ï¼Œè®©Javaä»£ç èƒ½å¤Ÿè°ƒç”¨åº•å±‚Nativeå®ç°ã€‚

### æ ¸å¿ƒæ¶æ„
```
Javaå±‚ AudioTrack API
        â†“
JNIå±‚ android_media_AudioTrack.cpp
        â†“
Nativeå±‚ AudioTrack (C++)
        â†“
AudioFlinger (éŸ³é¢‘ç³»ç»ŸæœåŠ¡)
```

## Javaå±‚å®šä¹‰

### AudioTrack.java æ ¸å¿ƒæ–¹æ³•
\`\`\`java
public class AudioTrack {
    // Javaå±‚æ–¹æ³•å£°æ˜
    public void play() {
        native_play(); // è°ƒç”¨nativeæ–¹æ³•
    }
    
    public int write(byte[] audioData, int offsetInBytes, int sizeInBytes) {
        return native_write_byte(audioData, offsetInBytes, sizeInBytes, AUDIO_FORMAT_PCM_16BIT);
    }
    
    public void stop() {
        native_stop();
    }
    
    public void release() {
        native_release();
    }
    
    // Nativeæ–¹æ³•å£°æ˜ï¼ˆæ²¡æœ‰å®ç°ä½“ï¼‰
    private native void native_play();
    private native int native_write_byte(byte[] audioData, int offsetInBytes, int sizeInBytes, int format);
    private native void native_stop();
    private native void native_release();
}
\`\`\`

## JNIå±‚å®ç°

### frameworks/base/media/jni/android_media_AudioTrack.cpp

#### play()æ–¹æ³•çš„JNIå®ç°
\`\`\`cpp
// JNIå‡½æ•°ï¼šå¯¹åº”Javaçš„native_play()
static void android_media_AudioTrack_play(JNIEnv *env, jobject thiz) {
    // ä»Javaå¯¹è±¡ä¸­è·å–Nativeå¯¹è±¡æŒ‡é’ˆ
    AudioTrack *lpTrack = getAudioTrack(env, thiz);
    if (lpTrack == NULL) {
        return;
    }
    
    // è°ƒç”¨C++ AudioTrackçš„playæ–¹æ³•
    lpTrack->play();
}
\`\`\`

#### write()æ–¹æ³•çš„JNIå®ç°
\`\`\`cpp
// JNIå‡½æ•°ï¼šå¯¹åº”Javaçš„native_write_byte()
static jint android_media_AudioTrack_write_byte(
        JNIEnv *env, jobject thiz,
        jbyteArray javaAudioData,
        jint offsetInBytes, jint sizeInBytes,
        jint javaAudioFormat) {
    
    // 1. è·å–Javaæ•°ç»„æŒ‡é’ˆ
    jbyte* cAudioData = env->GetByteArrayElements(javaAudioData, NULL);
    if (cAudioData == NULL) {
        return 0; // OutOfMemoryError already thrown
    }
    
    // 2. è·å–Native AudioTrackå¯¹è±¡
    AudioTrack *lpTrack = getAudioTrack(env, thiz);
    if (lpTrack == NULL) {
        env->ReleaseByteArrayElements(javaAudioData, cAudioData, JNI_ABORT);
        return 0;
    }
    
    // 3. è°ƒç”¨åº•å±‚writeå‡½æ•°
    ssize_t written = lpTrack->write(cAudioData + offsetInBytes, 
                                     sizeInBytes, true);
    
    // 4. é‡Šæ”¾Javaæ•°ç»„
    env->ReleaseByteArrayElements(javaAudioData, cAudioData, 0);
    
    return (jint)written;
}
\`\`\`

## JNIæ–¹æ³•æ³¨å†Œ

### JNI Nativeæ–¹æ³•æ³¨å†Œè¡¨
\`\`\`cpp
static const JNINativeMethod gMethods[] = {
    {"native_play", "()V", (void *)android_media_AudioTrack_play},
    {"native_write_byte", "([BIII)I", 
     (void *)android_media_AudioTrack_write_byte},
    {"native_stop", "()V", (void *)android_media_AudioTrack_stop},
    {"native_release", "()V", (void *)android_media_AudioTrack_release},
    {"native_get_native_frame_count", "()I", 
     (void *)android_media_AudioTrack_get_native_frame_count},
    // ... å…¶ä»–æ–¹æ³•æ˜ å°„
};

// æ³¨å†Œå‡½æ•°
int register_android_media_AudioTrack(JNIEnv *env) {
    return AndroidRuntime::registerNativeMethods(env,
            "android/media/AudioTrack", gMethods, NELEM(gMethods));
}
\`\`\`

## å®Œæ•´æ•°æ®æµè¿‡ç¨‹

### 1. å¼€å‘è€…è°ƒç”¨
\`\`\`java
// å¼€å‘è€…ä»£ç 
AudioTrack audioTrack = new AudioTrack(
    AudioManager.STREAM_MUSIC,
    44100,
    AudioFormat.CHANNEL_OUT_STEREO,
    AudioFormat.ENCODING_PCM_16BIT,
    bufferSize,
    AudioTrack.MODE_STREAM
);

byte[] audioData = getAudioData();
audioTrack.write(audioData, 0, audioData.length);
audioTrack.play();
\`\`\`

### 2. JNIè½¬æ¢è¿‡ç¨‹
\`\`\`cpp
// JNIå±‚å¤„ç†æµç¨‹
1. Java: audioTrack.write(audioData, 0, length)
   â†“
2. JNI: android_media_AudioTrack_write_byte()
   - è·å–Javaæ•°ç»„æŒ‡é’ˆ
   - è½¬æ¢ä¸ºC++ AudioTrackå¯¹è±¡
   - è°ƒç”¨Native writeæ–¹æ³•
   â†“
3. Native: AudioTrack::write()
   - éŸ³é¢‘æ•°æ®å¤„ç†
   - ä¼ é€’ç»™AudioFlinger
   â†“
4. AudioFlinger: éŸ³é¢‘æ··éŸ³å’Œè¾“å‡º
\`\`\`

## æ€§èƒ½ä¼˜åŒ–è¦ç‚¹

### 1. å†…å­˜ç®¡ç†
\`\`\`cpp
// é«˜æ•ˆçš„æ•°ç»„æ“ä½œ
jbyte* cAudioData = env->GetByteArrayElements(javaAudioData, NULL);
// ä½¿ç”¨JNI_ABORTæ¨¡å¼é¿å…ä¸å¿…è¦çš„å›æ‹·
env->ReleaseByteArrayElements(javaAudioData, cAudioData, JNI_ABORT);
\`\`\`

### 2. å¼‚å¸¸å¤„ç†
\`\`\`cpp
// å®Œå–„çš„é”™è¯¯æ£€æŸ¥
if (lpTrack == NULL) {
    jniThrowException(env, "java/lang/IllegalStateException", 
                      "AudioTrack not initialized");
    return 0;
}
\`\`\`

### 3. çº¿ç¨‹å®‰å…¨
\`\`\`cpp
// ç¡®ä¿çº¿ç¨‹å®‰å…¨çš„å¯¹è±¡è®¿é—®
AudioTrack *getAudioTrack(JNIEnv* env, jobject thiz) {
    Mutex::Autolock _l(sLock);
    return (AudioTrack*)env->GetLongField(thiz, fields.mNativeTrackInJavaObj);
}
\`\`\`

## è°ƒè¯•å’Œæµ‹è¯•

### JNIè°ƒè¯•æŠ€å·§
\`\`\`cpp
// æ·»åŠ è°ƒè¯•æ—¥å¿—
ALOGV("AudioTrack JNI: write %d bytes, format=%d", sizeInBytes, javaAudioFormat);

// æ€§èƒ½ç›‘æ§
nsecs_t startTime = systemTime();
ssize_t result = lpTrack->write(cAudioData + offsetInBytes, sizeInBytes, true);
nsecs_t endTime = systemTime();
ALOGD("AudioTrack write took %lld ns", endTime - startTime);
\`\`\`

### å•å…ƒæµ‹è¯•
\`\`\`java
// Javaå±‚æµ‹è¯•
@Test
public void testAudioTrackPlayback() {
    AudioTrack track = new AudioTrack(/* parameters */);
    byte[] testData = generateTestTone();
    int written = track.write(testData, 0, testData.length);
    assertEquals(testData.length, written);
    
    track.play();
    // éªŒè¯æ’­æ”¾çŠ¶æ€
    assertTrue(track.getPlayState() == AudioTrack.PLAYSTATE_PLAYING);
}
\`\`\`

## å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. å†…å­˜æ³„æ¼
- ç¡®ä¿Nativeå¯¹è±¡æ­£ç¡®é‡Šæ”¾
- åŠæ—¶é‡Šæ”¾JNIæ•°ç»„å¼•ç”¨

### 2. æ€§èƒ½ç“¶é¢ˆ
- å‡å°‘JNIè°ƒç”¨é¢‘ç‡
- ä¼˜åŒ–å†…å­˜æ‹·è´æ“ä½œ
- ä½¿ç”¨ç›´æ¥ç¼“å†²åŒºï¼ˆDirectBufferï¼‰

### 3. çº¿ç¨‹é—®é¢˜
- æ³¨æ„AudioTrackçš„çº¿ç¨‹æ¨¡å‹
- é¿å…åœ¨é”™è¯¯çº¿ç¨‹è°ƒç”¨API

é€šè¿‡æ·±å…¥ç†è§£AudioTrackçš„JNIå®ç°ï¼Œå¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–éŸ³é¢‘æ’­æ”¾æ€§èƒ½ï¼Œè§£å†³å¤æ‚çš„æŠ€æœ¯é—®é¢˜ã€‚`,
            date: "2025-12-19",
            tags: ["Android", "AudioTrack", "JNI", "éŸ³é¢‘æ’­æ”¾", "Nativeå¼€å‘"],
            author: "æŠ€æœ¯åšä¸»",
            readTime: "15åˆ†é’Ÿ"
          },
          {
            id: 5,
            title: "æ’­æ”¾å™¨é¢„åŠ è½½ä¸ç¼“å­˜ç­–ç•¥ï¼šæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒå…³é”®æŠ€æœ¯",
            excerpt: "æ·±å…¥è§£ææ’­æ”¾å™¨é¢„åŠ è½½æœºåˆ¶ã€ç¼“å­˜ç­–ç•¥è®¾è®¡ï¼Œä»seekbufferåˆ°normalbufferçš„å®Œæ•´ç¼“å†²ä½“ç³»ï¼ŒæŒæ¡æå‡æ’­æ”¾æ€§èƒ½çš„æ ¸å¿ƒæŠ€æœ¯ã€‚",
            content: `# æ’­æ”¾å™¨é¢„åŠ è½½ä¸ç¼“å­˜ç­–ç•¥è¯¦è§£

## æ ¸å¿ƒæ¦‚å¿µè§£æ

### é¢„åŠ è½½ï¼ˆPreloadï¼‰
é¢„åŠ è½½æ˜¯åœ¨ç”¨æˆ·å®é™…æ’­æ”¾å‰ï¼Œæå‰ä¸‹è½½å’Œç¼“å­˜åª’ä½“æ•°æ®çš„æŠ€æœ¯ï¼Œæ—¨åœ¨å‡å°‘æ’­æ”¾å¯åŠ¨å»¶è¿Ÿã€‚

### ç¼“å­˜ç­–ç•¥
ç¼“å­˜ç­–ç•¥å†³å®šäº†æ•°æ®ä½•æ—¶ä¸‹è½½ã€å­˜å‚¨å¤šå°‘ã€ä½•æ—¶æ¸…ç†ï¼Œç›´æ¥å½±å“æ’­æ”¾æµç•…åº¦å’Œèµ„æºå ç”¨ã€‚

## ç¼“å†²åŒºä½“ç³»æ¶æ„

### 1. SeekBufferï¼ˆè·³è½¬ç¼“å†²ï¼‰
\`\`\`cpp
class SeekBuffer {
private:
    std::vector<uint8_t> buffer_;
    size_t seek_pos_;
    bool is_seeking_;
    
public:
    // é¢„åŠ è½½seekä½ç½®é™„è¿‘çš„æ•°æ®
    void preloadSeekPosition(int64_t position) {
        seek_pos_ = position;
        // é¢„åŠ è½½å‰å5ç§’æ•°æ®
        int64_t start_pos = std::max(0LL, position - 5 * 1000000);
        int64_t end_pos = position + 5 * 1000000;
        
        preloadDataRange(start_pos, end_pos);
    }
    
    // å¤„ç†seekè¯·æ±‚
    bool handleSeek(int64_t position) {
        if (hasDataAt(position)) {
            return true; // ç¼“å†²åŒºå‘½ä¸­ï¼Œç«‹å³å“åº”
        }
        return false; // éœ€è¦ä»ç½‘ç»œåŠ è½½
    }
};
\`\`\`

### 2. NormalBufferï¼ˆå¸¸è§„ç¼“å†²ï¼‰
\`\`\`cpp
class NormalBuffer {
private:
    CircularBuffer circular_buffer_;
    size_t buffer_size_;
    BufferStrategy strategy_;
    
public:
    enum BufferStrategy {
        STRATEGY_AGGRESSIVE,  // ç§¯æç¼“å­˜ï¼Œé«˜æµç•…åº¦
        STRATEGY_BALANCED,    // å¹³è¡¡ç­–ç•¥
        STRATEGY_CONSERVATIVE // ä¿å®ˆç¼“å­˜ï¼Œä½å†…å­˜å ç”¨
    };
    
    // æ•°æ®å†™å…¥ç¼“å†²åŒº
    int writeData(const uint8_t* data, size_t size) {
        if (circular_buffer_.availableSpace() < size) {
            // æ ¹æ®ç­–ç•¥å†³å®šæ˜¯å¦è¦†ç›–æ—§æ•°æ®
            if (strategy_ == STRATEGY_AGGRESSIVE) {
                circular_buffer_.discardOldData(size);
            } else {
                return 0; // ç¼“å†²åŒºæ»¡ï¼Œæ‹’ç»å†™å…¥
            }
        }
        
        return circular_buffer_.write(data, size);
    }
    
    // ä»ç¼“å†²åŒºè¯»å–æ•°æ®
    int readData(uint8_t* data, size_t size) {
        return circular_buffer_.read(data, size);
    }
};
\`\`\`

## é¢„åŠ è½½ç­–ç•¥è®¾è®¡

### 1. æ™ºèƒ½é¢„åŠ è½½ç®—æ³•
\`\`\`cpp
class SmartPreloader {
private:
    struct PreloadTask {
        int64_t start_pos;
        int64_t end_pos;
        int priority;
        std::chrono::steady_clock::time_point created_time;
    };
    
    std::priority_queue<PreloadTask> preload_queue_;
    NetworkManager* network_manager_;
    
public:
    // åŸºäºç”¨æˆ·è¡Œä¸ºé¢„æµ‹çš„é¢„åŠ è½½
    void predictAndPreload(UserBehavior& behavior) {
        if (behavior.likely_to_seek) {
            // ç”¨æˆ·å¯èƒ½seekï¼Œé¢„åŠ è½½å…³é”®ä½ç½®
            preloadKeyPositions(behavior.video_duration);
        }
        
        if (behavior.will_watch_full_video) {
            // ç”¨æˆ·å¯èƒ½çœ‹å®Œæ•´ä¸ªè§†é¢‘ï¼Œé¡ºåºé¢„åŠ è½½
            preloadSequentialData(behavior.current_position);
        }
    }
    
    // é¢„åŠ è½½å…³é”®å¸§ä½ç½®
    void preloadKeyPositions(int64_t duration) {
        auto keyframes = getKeyFramePositions(duration);
        for (auto pos : keyframes) {
            PreloadTask task{
                .start_pos = pos - 2 * 1000000, // å‰2ç§’
                .end_pos = pos + 2 * 1000000,   // å2ç§’
                .priority = calculatePriority(pos),
                .created_time = std::chrono::steady_clock::now()
            };
            preload_queue_.push(task);
        }
    }
};
\`\`\`

### 2. ç½‘ç»œçŠ¶æ€æ„ŸçŸ¥é¢„åŠ è½½
\`\`\`cpp
class NetworkAwarePreloader {
private:
    enum NetworkType {
        NETWORK_WIFI,     // WiFiç½‘ç»œï¼Œç§¯æé¢„åŠ è½½
        NETWORK_4G,       // 4Gç½‘ç»œï¼Œé€‚åº¦é¢„åŠ è½½
        NETWORK_3G,       // 3Gç½‘ç»œï¼Œä¿å®ˆé¢„åŠ è½½
        NETWORK_2G        // 2Gç½‘ç»œï¼Œæœ€å°é¢„åŠ è½½
    };
    
    NetworkType current_network_;
    size_t max_preload_size_;
    
public:
    void onNetworkChanged(NetworkType new_type) {
        current_network_ = new_type;
        updatePreloadStrategy();
    }
    
    void updatePreloadStrategy() {
        switch (current_network_) {
            case NETWORK_WIFI:
                max_preload_size_ = 50 * 1024 * 1024; // 50MB
                break;
            case NETWORK_4G:
                max_preload_size_ = 20 * 1024 * 1024; // 20MB
                break;
            case NETWORK_3G:
                max_preload_size_ = 10 * 1024 * 1024; // 10MB
                break;
            case NETWORK_2G:
                max_preload_size_ = 5 * 1024 * 1024;  // 5MB
                break;
        }
    }
};
\`\`\`

## ç¼“å­˜ç®¡ç†ç­–ç•¥

### 1. LRUç¼“å­˜å®ç°
\`\`\`cpp
class LRUCache {
private:
    struct CacheNode {
        std::string key;
        std::vector<uint8_t> data;
        std::chrono::steady_clock::time_point last_access;
        size_t size;
    };
    
    std::unordered_map<std::string, std::list<CacheNode>::iterator> cache_map_;
    std::list<CacheNode> cache_list_;
    size_t total_size_;
    size_t max_size_;
    
public:
    bool get(const std::string& key, std::vector<uint8_t>& data) {
        auto it = cache_map_.find(key);
        if (it == cache_map_.end()) {
            return false; // ç¼“å­˜æœªå‘½ä¸­
        }
        
        // ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨ï¼ˆæœ€è¿‘ä½¿ç”¨ï¼‰
        cache_list_.splice(cache_list_.begin(), cache_list_, it->second);
        it->second->last_access = std::chrono::steady_clock::now();
        
        data = it->second->data;
        return true;
    }
    
    void put(const std::string& key, const std::vector<uint8_t>& data) {
        // æ£€æŸ¥æ˜¯å¦éœ€è¦æ¸…ç†ç¼“å­˜
        while (total_size_ + data.size() > max_size_) {
            evictLRU();
        }
        
        // æ·»åŠ æ–°ç¼“å­˜é¡¹
        CacheNode node{
            .key = key,
            .data = data,
            .last_access = std::chrono::steady_clock::now(),
            .size = data.size()
        };
        
        cache_list_.push_front(node);
        cache_map_[key] = cache_list_.begin();
        total_size_ += data.size();
    }
    
private:
    void evictLRU() {
        if (cache_list_.empty()) return;
        
        auto last = cache_list_.end();
        last--;
        
        total_size_ -= last->size;
        cache_map_.erase(last->key);
        cache_list_.pop_back();
    }
};
\`\`\`

### 2. ç£ç›˜ç¼“å­˜ç®¡ç†
\`\`\`cpp
class DiskCache {
private:
    std::string cache_dir_;
    size_t max_disk_usage_;
    std::unordered_map<std::string, CacheInfo> cache_index_;
    
    struct CacheInfo {
        std::string file_path;
        size_t file_size;
        std::chrono::steady_clock::time_point last_access;
        int access_count;
    };
    
public:
    // å­˜å‚¨æ•°æ®åˆ°ç£ç›˜ç¼“å­˜
    bool storeToDisk(const std::string& key, const std::vector<uint8_t>& data) {
        std::string file_path = getCacheFilePath(key);
        
        // æ£€æŸ¥ç£ç›˜ç©ºé—´
        if (getDiskUsage() + data.size() > max_disk_usage_) {
            cleanupOldFiles();
        }
        
        // å†™å…¥æ–‡ä»¶
        std::ofstream file(file_path, std::ios::binary);
        if (!file.is_open()) {
            return false;
        }
        
        file.write(reinterpret_cast<const char*>(data.data()), data.size());
        file.close();
        
        // æ›´æ–°ç´¢å¼•
        CacheInfo info{
            .file_path = file_path,
            .file_size = data.size(),
            .last_access = std::chrono::steady_clock::now(),
            .access_count = 1
        };
        cache_index_[key] = info;
        
        return true;
    }
    
    // ä»ç£ç›˜ç¼“å­˜è¯»å–
    bool loadFromDisk(const std::string& key, std::vector<uint8_t>& data) {
        auto it = cache_index_.find(key);
        if (it == cache_index_.end()) {
            return false;
        }
        
        std::ifstream file(it->second.file_path, std::ios::binary);
        if (!file.is_open()) {
            return false;
        }
        
        file.seekg(0, std::ios::end);
        size_t file_size = file.tellg();
        file.seekg(0, std::ios::beg);
        
        data.resize(file_size);
        file.read(reinterpret_cast<char*>(data.data()), file_size);
        
        // æ›´æ–°è®¿é—®ä¿¡æ¯
        it->second.last_access = std::chrono::steady_clock::now();
        it->second.access_count++;
        
        return true;
    }
};
\`\`\`

## æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜

### 1. ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§
\`\`\`cpp
class CacheMetrics {
private:
    std::atomic<uint64_t> cache_hits_{0};
    std::atomic<uint64_t> cache_misses_{0};
    std::atomic<uint64_t> preload_hits_{0};
    
public:
    void recordCacheHit() {
        cache_hits_++;
    }
    
    void recordCacheMiss() {
        cache_misses_++;
    }
    
    void recordPreloadHit() {
        preload_hits_++;
    }
    
    double getCacheHitRate() const {
        uint64_t total = cache_hits_ + cache_misses_;
        return total > 0 ? static_cast<double>(cache_hits_) / total : 0.0;
    }
    
    void printMetrics() const {
        ALOGD("Cache Metrics:");
        ALOGD("  Hit Rate: %.2f%%", getCacheHitRate() * 100);
        ALOGD("  Preload Hits: %llu", preload_hits_.load());
        ALOGD("  Total Requests: %llu", cache_hits_ + cache_misses_);
    }
};
\`\`\`

### 2. è‡ªé€‚åº”ç¼“å†²ç­–ç•¥
\`\`\`cpp
class AdaptiveBuffer {
private:
    int current_buffer_size_;
    int min_buffer_size_;
    int max_buffer_size_;
    std::vector<double> network_speed_history_;
    
public:
    void adjustBufferSize(double current_speed) {
        network_speed_history_.push_back(current_speed);
        if (network_speed_history_.size() > 10) {
            network_speed_history_.erase(network_speed_history_.begin());
        }
        
        double avg_speed = calculateAverageSpeed();
        
        if (avg_speed < 1000000) { // < 1Mbps
            // ç½‘ç»œè¾ƒæ…¢ï¼Œå¢åŠ ç¼“å†²åŒº
            current_buffer_size_ = std::min(
                current_buffer_size_ * 2, max_buffer_size_);
        } else if (avg_speed > 5000000) { // > 5Mbps
            // ç½‘ç»œè¾ƒå¿«ï¼Œå¯ä»¥å‡å°‘ç¼“å†²åŒº
            current_buffer_size_ = std::max(
                current_buffer_size_ / 2, min_buffer_size_);
        }
    }
};
\`\`\`

## æµ‹è¯•éªŒè¯æ–¹æ¡ˆ

### 1. é¢„åŠ è½½æ•ˆæœæµ‹è¯•
\`\`\`bash
# æµ‹è¯•é¢„åŠ è½½å‘½ä¸­ç‡
test_preload_hit_rate() {
    start_player_with_preload
    simulate_user_seek_behavior
    measure_preload_effectiveness
}

# æµ‹è¯•ä¸åŒç½‘ç»œç¯å¢ƒä¸‹çš„è¡¨ç°
test_network_adaptation() {
    for network_type in wifi 4g 3g; do
        simulate_network_condition $network_type
        measure_buffer_underrun_rate
        measure_startup_latency
    done
}
\`\`\`

### 2. ç¼“å­˜æ€§èƒ½æµ‹è¯•
\`\`\`cpp
// ç¼“å­˜æ€§èƒ½åŸºå‡†æµ‹è¯•
void benchmarkCachePerformance() {
    const int test_iterations = 10000;
    std::vector<uint8_t> test_data(1024 * 1024); // 1MBæµ‹è¯•æ•°æ®
    
    auto start = std::chrono::high_resolution_clock::now();
    
    for (int i = 0; i < test_iterations; i++) {
        std::string key = "test_key_" + std::to_string(i);
        cache.put(key, test_data);
        
        std::vector<uint8_t> retrieved_data;
        cache.get(key, retrieved_data);
    }
    
    auto end = std::chrono::high_resolution_clock::now();
    auto duration = std::chrono::duration_cast<std::chrono::milliseconds>(end - start);
    
    ALOGD("Cache benchmark: %d operations in %lld ms", 
          test_iterations * 2, duration.count());
}
\`\`\`

é€šè¿‡åˆç†è®¾è®¡é¢„åŠ è½½å’Œç¼“å­˜ç­–ç•¥ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ’­æ”¾å™¨çš„æ€§èƒ½è¡¨ç°ï¼Œå‡å°‘å¡é¡¿å’Œå¯åŠ¨å»¶è¿Ÿï¼Œä¸ºç”¨æˆ·æä¾›æ›´æµç•…çš„æ’­æ”¾ä½“éªŒã€‚`,
            date: "2025-12-18",
            tags: ["é¢„åŠ è½½", "ç¼“å­˜ç­–ç•¥", "æ€§èƒ½ä¼˜åŒ–", "æ’­æ”¾å™¨", "ç¼“å†²ç®¡ç†"],
            author: "æŠ€æœ¯åšä¸»",
            readTime: "18åˆ†é’Ÿ"
          }
      ];

// æ‰€æœ‰æ ‡ç­¾
      const allTags = ["éŸ³é¢‘å¤„ç†", "è§†é¢‘è§£ç ", "æµ‹è¯•æŠ€æœ¯", "æ€§èƒ½ä¼˜åŒ–", "Android", "Windows", "API", "ç¡¬è§£", "è½¯è§£", "å…¼å®¹æ€§", "é¢„åŠ è½½", "ç¼“å­˜ç­–ç•¥", "NVIDIA", "EVR", "å£°é“æµ‹è¯•", "æ–‡ä»¶åˆ¶ä½œ", "éªŒè¯æ–¹æ¡ˆ", "OpenSLES", "AudioRecord", "éŸ³è§†é¢‘è§£ç "];

      // è·¯ç”±ç®¡ç†
      class Router {
        constructor() {
          this.routes = {};
          this.currentPage = 'home-page';
          this.init();
        }

        init() {
          window.addEventListener('hashchange', () => this.handleRoute());
          window.addEventListener('load', () => this.handleRoute());
          this.setupNavigation();
          this.setupDarkMode();
        }

        handleRoute() {
          const hash = window.location.hash.slice(1) || '/';
          this.navigateTo(hash);
        }

        navigateTo(path) {
          // éšè—æ‰€æœ‰é¡µé¢
          document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
          });

          // æ˜¾ç¤ºå¯¹åº”é¡µé¢
          let pageId = 'home-page';
          if (path === '/') {
            pageId = 'home-page';
          } else if (path === '/posts') {
            pageId = 'posts-page';
          } else if (path.startsWith('/posts/')) {
            pageId = 'post-detail-page';
            const postId = path.split('/')[2];
            this.showPostDetail(postId);
          } else if (path === '/tags') {
            pageId = 'tags-page';
          } else if (path === '/about') {
            pageId = 'about-page';
          }

          const targetPage = document.getElementById(pageId);
          if (targetPage) {
            targetPage.classList.add('active');
            this.currentPage = pageId;
          }

          // æ›´æ–°å¯¼èˆªæ æ ·å¼
          this.updateNavigation(path);
        }

        setupNavigation() {
          // å¯¼èˆªé“¾æ¥å·²ç»é€šè¿‡HTMLçš„hrefå±æ€§è®¾ç½®äº†hashè·¯ç”±
        }

        updateNavigation(currentPath) {
          document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('text-primary');
            link.classList.add('text-gray-700', 'dark:text-gray-300');
          });

          const activeLink = document.querySelector(`.nav-link[href="#${currentPath}"]`);
          if (activeLink) {
            activeLink.classList.remove('text-gray-700', 'dark:text-gray-300');
            activeLink.classList.add('text-primary');
          }
        }

        setupDarkMode() {
          const darkModeToggle = document.getElementById('darkModeToggle');
          const savedMode = localStorage.getItem('darkMode');
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          const isDark = savedMode ? JSON.parse(savedMode) : prefersDark;

          document.documentElement.classList.toggle('dark', isDark);
          darkModeToggle.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';

          darkModeToggle.addEventListener('click', () => {
            const newMode = !document.documentElement.classList.contains('dark');
            document.documentElement.classList.toggle('dark', newMode);
            localStorage.setItem('darkMode', JSON.stringify(newMode));
            darkModeToggle.textContent = newMode ? 'â˜€ï¸' : 'ğŸŒ™';
          });
        }

        showPostDetail(postId) {
          const post = posts.find(p => p.id === parseInt(postId));
          if (!post) {
            document.getElementById('post-content').innerHTML = `
              <h1 class="text-4xl font-bold text-center">æ–‡ç« æœªæ‰¾åˆ°</h1>
            `;
            return;
          }

          document.getElementById('post-content').innerHTML = `
            <h1 class="text-4xl font-bold mb-6">${post.title}</h1>
            <div class="flex items-center justify-between mb-8">
              <div class="flex items-center space-x-4">
                <span class="text-gray-600 dark:text-gray-400">${post.date}</span>
                <span class="text-gray-600 dark:text-gray-400">${post.author}</span>
                <span class="text-gray-600 dark:text-gray-400">${post.readTime}</span>
              </div>
            </div>
            <div class="flex flex-wrap gap-2 mb-8">
              ${post.tags.map(tag => `<span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">${tag}</span>`).join('')}
            </div>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">${post.content}</p>
              <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed mt-6">
                è¿™é‡Œæ˜¯æ–‡ç« çš„è¯¦ç»†å†…å®¹ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šåŒ…å«å®Œæ•´çš„æ–‡ç« å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ç¤ºä¾‹ã€å›¾ç‰‡ã€é“¾æ¥ç­‰ã€‚
                é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¯»è€…æä¾›æ›´åŠ ä¸°å¯Œå’Œæ·±å…¥çš„é˜…è¯»ä½“éªŒã€‚
              </p>
            </div>
            <div class="mt-8">
              <a href="#/posts" class="text-primary hover:underline">â† è¿”å›æ–‡ç« åˆ—è¡¨</a>
            </div>
          `;
        }
      }

      // æ¸²æŸ“æ–‡ç« å¡ç‰‡
      function createPostCard(post) {
        return `
          <div class="bg-white dark:bg-dark rounded-lg shadow-lg overflow-hidden card-hover">
            <div class="p-6">
              <div class="flex items-center justify-between mb-4">
                <span class="text-sm text-gray-500 dark:text-gray-400">${post.date}</span>
                <span class="text-sm text-gray-500 dark:text-gray-400">${post.readTime}</span>
              </div>
              <h3 class="text-xl font-bold mb-3 text-gray-800 dark:text-gray-100">
                ${post.title}
              </h3>
              <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3">
                ${post.excerpt}
              </p>
              <div class="flex flex-wrap gap-2 mb-4">
                ${post.tags.map(tag => `<span class="tag-hover bg-primary/10 text-primary px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-primary hover:text-white">${tag}</span>`).join('')}
              </div>
              <a href="#/posts/${post.id}" class="text-primary font-semibold hover:text-primary/80 transition-colors">
                é˜…è¯»æ›´å¤š â†’
              </a>
            </div>
          </div>
        `;
      }

      // åˆå§‹åŒ–åº”ç”¨
      document.addEventListener('DOMContentLoaded', () => {
        const router = new Router();

        // æ¸²æŸ“é¦–é¡µæ–‡ç« 
        const homePostsContainer = document.getElementById('home-posts');
        if (homePostsContainer) {
          homePostsContainer.innerHTML = posts.map(post => createPostCard(post)).join('');
        }

        // æ¸²æŸ“å…¨éƒ¨æ–‡ç« é¡µé¢
        const allPostsContainer = document.getElementById('all-posts');
        if (allPostsContainer) {
          allPostsContainer.innerHTML = posts.map(post => createPostCard(post)).join('');
        }

        // æ¸²æŸ“æ ‡ç­¾äº‘
        const tagsCloudContainer = document.getElementById('tags-cloud');
        if (tagsCloudContainer) {
          tagsCloudContainer.innerHTML = allTags.map(tag => 
            `<span class="tag-hover bg-gradient-to-r from-primary to-secondary text-white px-6 py-3 rounded-full text-lg font-semibold cursor-pointer hover:shadow-lg">${tag}</span>`
          ).join('');
        }

        // æ»šåŠ¨æ•ˆæœ
        window.addEventListener('scroll', () => {
          const navbar = document.getElementById('navbar');
          if (window.scrollY > 50) {
            navbar.classList.add('bg-white/95', 'dark:bg-dark/95', 'backdrop-blur-md', 'shadow-md');
            navbar.classList.remove('bg-transparent');
          } else {
            navbar.classList.remove('bg-white/95', 'dark:bg-dark/95', 'backdrop-blur-md', 'shadow-md');
            navbar.classList.add('bg-transparent');
          }
        });
      });
    </script>
  </body>
</html>